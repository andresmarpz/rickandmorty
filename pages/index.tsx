import Layout from "@/components/Layout";
import { styled } from "@/stitches.config";
import type { GetStaticProps, NextPage } from "next";
import Head from "next/head";
import Image from "next/image";

import { getCharacters } from "rickmortyapi";

import Gallery from "@/components/Gallery";
import type { ApiResponse, Character, Info } from "rickmortyapi/dist/interfaces";

const Header = styled("header", {
	display: "flex",
	justifyContent: "center",
	padding: 16,
});

const Separator = styled("hr", {
	border: 0,
	borderTop: "1px solid $gray5",
	maxWidth: "75%",
	margin: "48px auto",
});

const Section = styled("section", {
	position: "relative",

	backgroundImage: "url('/assets/images/rick-morty.png')",
	backgroundRepeat: "no-repeat",
	backgroundSize: "cover",
	marginX: "12%",
	paddingBottom: "65%",
	height: 0,
	textAlign: "center",
});

export const getStaticProps: GetStaticProps = async (context) => {
	const initialProps = await getCharacters();

	return {
		props: {
			initialProps,
		},
	};
};

interface Props {
	initialProps: ApiResponse<Info<Character[]>>;
}

const Home: NextPage<Props> = ({ initialProps }) => {
	return (
		<Layout>
			<Head>
				<title>Rick & Morty</title>
				<meta name="description" content="Generated by create next app" />
				<link rel="icon" href="/favicon.ico" />
			</Head>
			<main>
				<Header>
					<Image src="/assets/images/header.png" width={400} height={100} />
				</Header>
				<Section></Section>
				<Separator />
				<section>
					<h1>Gallery</h1>
					<Gallery initialProps={initialProps} />
				</section>
			</main>
		</Layout>
	);
};

export default Home;
